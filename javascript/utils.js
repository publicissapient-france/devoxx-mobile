define(["log","ui"],function(e,t){var n=e.getLogger("utils");n.info("Loading utils.js");var r={},i="http://backend.mobile.xebia.io/api/v1/conferences",s="http://backend.mobile.xebia.io/api/v1/conferences";return r.getJsonApiBaseUrl=function(){return i},r.saveDataToDb=function(e,t){var i=new Date;n.info("Saving Json "+e+" content: "+r.showInterval(i)),r.db.save({key:e,value:t}),n.info("Saved Json "+e+" content: "+r.showInterval(i))},r.loadFromUrl=function(e,t,i){var s=new Date;n.info("Start loading "+e+" content: "+r.showInterval(s)),$.when($.ajax(t,{dataType:"json"})).then(function(t){n.info("Loaded Json "+e+" content: "+r.showInterval(s)),i(t)})},r.linkify=function(e){var t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,n=e.replace(t,'<a href="$1" target="_blank">$1</a>'),r=/(^|[^\/])(www\.[\S]+(\b|$))/gim;n=n.replace(r,'$1<a href="http://$2" target="_blank">$2</a>');var i=/(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim;return n=n.replace(i,'<a href="mailto:$1">$1</a>'),n},r.decodeHtmlEntities=function(e){return $("<div/>").html(e).text()},r.stripTags=function(e){var t=e.replace(/(<([^>]+)>)/ig,"").replace(/\r\n/g,"<br>").replace(/\r/g,"<br>").replace(/\n/g,"<br>");return r.linkify(t)},r.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(window.location.href);return n==null?"":decodeURIComponent(n[1].replace(/\+/g," "))},r.showInterval=function(e){var t=new Date(new Date-e+e.getTimezoneOffset()*6e4),n=t.toString("HH:mm:ss");return n+"."+t.getMilliseconds()},r.getFullUrl=function(e){return i+e},r.getTwitterFullUrl=function(e){return s+e},n.info("Loaded utils"),r});